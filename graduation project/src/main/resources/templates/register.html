<!-- 头部 -->
<!DOCTYPE html>
<html class="fly-html-layui fly-html-store" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href="/static/css/layui.css">
    <link rel="stylesheet" href="/static/css/global.css" charset="utf-8">
    <link rel="stylesheet" href="/static/css/global(1).css" charset="utf-8">
    <link rel="stylesheet" href="/static/css/store.css" charset="utf-8">

    <script type="text/javascript" src="/static/hotel/layui/dist/layui.js"></script>

    <script type="text/javascript" src="/static/js/jquery-1.8.3.js"></script>






</head>
<title>用户登入-注册</title>
<body>
<div th:replace="common/top::html"></div>
<div class="layui-container shopdata">
    <div class="layui-card shopdata-intro">

        <div class=" login-content">
            <!--登录 start-->
            <div class="login-bg">
                <div class="login-cont w1200">
                    <div class="form-box">
                        <form method="post" class="layui-form"  id="writeForm" >
                            <legend>注册</legend>
                            <div class="layui-form-item">
                                <div class="layui-inline iphone">
                                    <div class="layui-input-inline">
                                        <input type="tel" name="phone" id="phone" lay-verify="required|phone"
                                               placeholder="请输入手机号" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-inline veri-code">
                                    <div class="layui-input-inline">
                                        <input id="pnum1" type="password" name="password" lay-verify="required"
                                               placeholder="请输入登录密码" autocomplete="off" class="layui-input">

                                    </div>
                                </div>
                                <div class="layui-inline veri-code">
                                    <div class="layui-input-inline">
                                        <input id="pnum2"type="password"
                                               lay-verify="required" placeholder="请再次输入密码" autocomplete="off"
                                               class="layui-input">

                                    </div>
                                </div>




                            </div>

                        </form>
                        <div class="layui-form-item login-btn">
                            <div class="layui-input-block">
                                <button class="layui-btn" lay-submit="" onclick="updateMember()">
                                    注册
                                </button>
                            </div>
                        </div>


                        <script>

                            function updateMember() {

                                var passOne = $("#pnum1").val();
                                var passTwo = $("#pnum2").val();
                                var phone = $("#phone").val();
                                var regs = /^((13[0-9])|(17[0-1,6-8])|(15[^4,\\D])|(18[0-9]))\d{8}$/;

                                if(!regs.test(phone)){
                                    alert('手机号格式测错误！');
                                    return false;
                                }



                                if (passOne != passTwo) {




                                    alert("两次密码输入不一致");
                                    return false;
                                }else {

                                    $.ajax({
                                        //几个参数需要注意一下
                                        type: "POST",//方法类型
                                        url: "/user/insert",//url
                                        data: $('#writeForm').serialize(),

                                        success: function (result) {
                                            if (result == 200) {
                                                alert("注册成功,转到登陆");
                                                window.location.href="/user/tologin";

                                            }
                                            ;
                                        },
                                        error: function () {

                                            alert('注册失败！');



                                        }
                                    });
                                }








                            }





                        </script>

                    </div>
                </div>
            </div>
            <!--登录 end-->

        </div>
    </div>


</div>



</body>
